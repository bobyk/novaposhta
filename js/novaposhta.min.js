(function(d){d.fn.novaposhta=function(l,j){d.fn.novaposhta.options=d.extend({},d.fn.novaposhta.options,j);var k=d(this).first();c({lang:l,type:""},function(m){e(k,m);b(k)});return this.each(function(){d(this).on("change",function(m){d(this).removeAttr("rel");if(d(this).attr("name")=="department"){return}var n={lang:l,type:d(this).attr("name"),id:d(this).val()};if(n.id>0){c(n,function(o){i(n.type);var p=a(h(n.type));if(p!==null){e(p,o);b(p)}})}else{i(n.type)}})})};d.fn.novaposhta.options={onStart:function(){},onComplete:function(){}};function b(j,k){var k=d(j).attr("rel");if(k>0){j.find('option[value="'+k+'"]').attr("selected",true);j.change()}}function c(j,k){if(typeof d.fn.novaposhta.options.onStart=="function"){d.fn.novaposhta.options.onStart(j)}d.getJSON(g(j)).fail(function(n,o,l){var m=o+", "+l;console.log("Request Failed: "+m)}).done(function(l){if(typeof d.fn.novaposhta.options.onComplete=="function"){d.fn.novaposhta.options.onComplete(l,j)}k(l,j)})}function g(l){var j="http://np.artefact.in.ua/";j+=l.lang+"/";var k="region";if(l.type){k=h(l.type)}j+=k+"/";if(l.id){j+=l.id+"/"}return j.replace(/\/$/i,"")+"?jsoncallback=?"}function e(l,j){f(l);for(var k in j){d(l).append(d('<option value="'+j[k].id+'">'+j[k].title+"</option>"))}}function h(j){switch(j){case"region":j="city";break;case"city":j="department";break;case"department":j=null;break}return j}function i(j){j=h(j);var k=a(j);if(k==null){return}f(k);i(j)}function f(j){j.find("option").not('[value=""]').remove()}function a(j){if(j!==null){return d('select[name="'+j+'"')}return null}}(jQuery));